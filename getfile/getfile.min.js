async function getFile(e="",t={},a){const i=await fetch(e,{method:"HEAD"});if(!i.ok)return;const o=6e3*Math.floor(new Date(i.headers.get("Last-Modified")).getTime()/6e3);let n="grezisek-"+e,c=localStorage,s=JSON.parse,r=c.getItem(n);if((r=r?s(r):{lastModified:"0"}).lastModified==o)return"json"==a?s(r.data):r.data;const d=await fetch(e,Object.assign({cache:"reload"},t));if(!d.ok)return;const f=await d.text();return c.setItem(n,JSON.stringify({lastModified:o,data:f})),f!=s(c.getItem(n)).data&&(console.warn(`getFile: file content mismatch in cached ${e}. Deleting corrupted cache data...`),c.removeItem(n)),"json"==a?s(f):f}
