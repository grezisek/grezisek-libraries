async function getFile(e="",t={},a){const i=await fetch(e,{method:"HEAD"}),o=6e3*Math.floor(new Date(i.headers.get("Last-Modified")).getTime()/6e3);let s=localStorage.getItem("grezisek-"+e);if((s=s?JSON.parse(s):{lastModified:"0"}).lastModified==o)return"json"==a?JSON.parse(s.data):s.data;const r=new Request(e,Object.assign({cache:"reload"},t)),c=await fetch(r),l=await c.text();return localStorage.setItem("grezisek-"+e,JSON.stringify({lastModified:o,data:l})),l!=JSON.parse(localStorage.getItem("grezisek-"+e)).data&&(console.warn(`getFile: file content mismatch in cached ${e}. Deleting corrupted cache data...`),localStorage.removeItem("grezisek-"+e)),"json"==a?JSON.parse(l):l}
